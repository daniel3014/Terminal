<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Terminal</title>

<style>
:root {
  --glass: rgba(255,255,255,0.55);
  --border: rgba(255,255,255,0.35);
  --blur: blur(22px);
  --shadow: 0 20px 40px rgba(0,0,0,0.1);
}

* { box-sizing: border-box; font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif; }

body {
  margin: 0;
  min-height: 100vh;
  background: linear-gradient(135deg, #e6f1ff, #cfe4ff);
  padding: 30px 16px;
}

.app {
  max-width: 1000px;
  margin: auto;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
  gap: 20px;
}

/* WIDGET */
.widget {
  background: var(--glass);
  backdrop-filter: var(--blur);
  border: 1px solid var(--border);
  border-radius: 26px;
  box-shadow: var(--shadow);
  padding: 22px;
  cursor: default;
  transition: transform 0.25s ease;
}

.edit-mode .widget {
  cursor: grab;
  animation: wiggle 0.4s ease-in-out infinite alternate;
}

@keyframes wiggle {
  from { transform: rotate(-0.4deg); }
  to { transform: rotate(0.4deg); }
}

/* CLOCK */
.clock {
  grid-column: span 2;
  text-align: center;
}

.clock-time {
  font-size: 64px;
}

.clock-date {
  opacity: 0.6;
}

/* WEATHER */
.weather strong {
  font-size: 28px;
}

/* FORECAST */
.forecast {
  display: flex;
  justify-content: space-between;
}

/* THEME SLIDER */
.theme-slider {
  position: fixed;
  top: 20px;
  right: 20px;
  width: 160px;
  padding: 10px;
  border-radius: 30px;
  background: var(--glass);
  backdrop-filter: var(--blur);
  border: 1px solid var(--border);
}

.track {
  position: relative;
  height: 36px;
  background: rgba(255,255,255,0.4);
  border-radius: 18px;
}

.thumb {
  position: absolute;
  top: 4px;
  left: 4px;
  width: 28px;
  height: 28px;
  border-radius: 50%;
  background: white;
  box-shadow: var(--shadow);
  cursor: pointer;
  transition: left 0.25s ease;
}

.labels {
  display: flex;
  justify-content: space-between;
  font-size: 14px;
  margin-top: 6px;
  opacity: 0.7;
}
</style>
</head>

<body>

<!-- THEME SLIDER -->
<div class="theme-slider">
  <div class="track" id="track">
    <div class="thumb" id="thumb"></div>
  </div>
  <div class="labels">
    <span>â˜€ï¸</span>
    <span>AUTO</span>
    <span>ğŸŒ™</span>
  </div>
</div>

<div class="app" id="grid">

  <div class="widget weather">
    <strong>23Â°C â˜€ï¸</strong><br>
    SensaÃ§Ã£o 25Â° Â· Chuva 10%
  </div>

  <div class="widget clock">
    <div class="clock-time" id="time"></div>
    <div class="clock-date" id="date"></div>
  </div>

  <div class="widget forecast">
    <span>â˜€ï¸ 24Â°</span>
    <span>ğŸŒ§ï¸ 22Â°</span>
    <span>â›… 23Â°</span>
  </div>

  <div class="widget">
    Widget futuro do Jarvis
  </div>

</div>

<script>
// CLOCK
function updateClock() {
  const now = new Date();
  time.textContent = now.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});
  date.textContent = now.toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long"});
}
updateClock();
setInterval(updateClock,1000);

// EDIT MODE (PRESS & HOLD)
let editTimer;
const grid = document.getElementById("grid");

grid.addEventListener("mousedown", e => {
  if (!e.target.classList.contains("widget")) return;
  editTimer = setTimeout(() => {
    document.body.classList.add("edit-mode");
    e.target.draggable = true;
  }, 500);
});

grid.addEventListener("mouseup", () => clearTimeout(editTimer));
grid.addEventListener("mouseleave", () => clearTimeout(editTimer));
document.body.addEventListener("click", e => {
  if (!e.target.closest(".widget")) {
    document.body.classList.remove("edit-mode");
  }
});

// DRAG
let dragged;
document.querySelectorAll(".widget").forEach(w => {
  w.addEventListener("dragstart", () => dragged = w);
  w.addEventListener("dragover", e => e.preventDefault());
  w.addEventListener("drop", e => {
    e.preventDefault();
    if (dragged && dragged !== w) {
      const nodes = [...grid.children];
      const a = nodes.indexOf(dragged);
      const b = nodes.indexOf(w);
      grid.insertBefore(dragged, a < b ? w.nextSibling : w);
    }
  });
});

// THEME SLIDER SNAP
const thumb = document.getElementById("thumb");
const track = document.getElementById("track");

const positions = [4, 60, 116]; // light, auto, dark
let current = 1; // auto

function snapTo(index) {
  current = index;
  thumb.style.left = positions[index] + "px";
}

thumb.addEventListener("mousedown", e => {
  const startX = e.clientX;
  const startLeft = thumb.offsetLeft;

  function move(ev) {
    let delta = ev.clientX - startX;
    let pos = Math.min(116, Math.max(4, startLeft + delta));
    thumb.style.left = pos + "px";
  }

  function up() {
    document.removeEventListener("mousemove", move);
    document.removeEventListener("mouseup", up);

    const pos = thumb.offsetLeft;
    if (pos < 40) snapTo(0);
    else if (pos < 90) snapTo(1);
    else snapTo(2);
  }

  document.addEventListener("mousemove", move);
  document.addEventListener("mouseup", up);
});

snapTo(1);
</script>

</body>
</html>
