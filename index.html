<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>Terminal</title>

<style>
:root {
  --glass: rgba(255,255,255,0.55);
  --border: rgba(255,255,255,0.35);
  --blur: blur(22px);
  --shadow: 0 20px 40px rgba(0,0,0,0.12);
}

* {
  box-sizing: border-box;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
}

body {
  margin: 0;
  min-height: 100vh;
  background: linear-gradient(135deg, #eaf3ff, #cfe4ff);
  padding: 30px 16px;
}

.app {
  max-width: 1000px;
  margin: auto;
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
  gap: 20px;
  position: relative;
}

/* GRID VISUAL (APENAS EM MODO EDI√á√ÉO) */
.edit-mode .app::before {
  content: "";
  position: absolute;
  inset: 0;
  background-image:
    linear-gradient(to right, rgba(0,0,0,0.05) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(0,0,0,0.05) 1px, transparent 1px);
  background-size: 20px 20px;
  pointer-events: none;
}

/* WIDGET */
.widget {
  background: var(--glass);
  backdrop-filter: var(--blur);
  border: 1px solid var(--border);
  border-radius: 26px;
  box-shadow: var(--shadow);
  padding: 22px;
  transition: transform 0.25s ease;
}

.edit-mode .widget {
  cursor: grab;
  animation: wiggle 0.35s ease-in-out infinite alternate;
}

@keyframes wiggle {
  from { transform: rotate(-0.3deg); }
  to   { transform: rotate(0.3deg); }
}

/* CLOCK */
.clock {
  grid-column: span 2;
  text-align: center;
}

.clock-time {
  font-size: 60px;
}

.clock-date {
  opacity: 0.6;
}

/* WEATHER */
.weather strong {
  font-size: 26px;
}

/* FORECAST */
.forecast {
  display: flex;
  justify-content: space-between;
}

/* THEME SLIDER (VERS√ÉO ANTERIOR) */
.theme-slider {
  position: fixed;
  top: 20px;
  right: 20px;
  width: 150px;
  padding: 10px;
  border-radius: 30px;
  background: var(--glass);
  backdrop-filter: var(--blur);
  border: 1px solid var(--border);
}

.track {
  position: relative;
  height: 34px;
  background: rgba(255,255,255,0.45);
  border-radius: 18px;
}

.thumb {
  position: absolute;
  top: 4px;
  left: 58px;
  width: 26px;
  height: 26px;
  border-radius: 50%;
  background: white;
  box-shadow: var(--shadow);
  cursor: pointer;
  transition: left 0.25s ease;
}

.labels {
  display: flex;
  justify-content: space-between;
  font-size: 13px;
  margin-top: 6px;
  opacity: 0.7;
}
</style>
</head>

<body>

<!-- THEME -->
<div class="theme-slider">
  <div class="track" id="track">
    <div class="thumb" id="thumb"></div>
  </div>
  <div class="labels">
    <span>‚òÄÔ∏è</span>
    <span>AUTO</span>
    <span>üåô</span>
  </div>
</div>

<div class="app" id="grid">

  <div class="widget weather">
    <strong>23¬∞C ‚òÄÔ∏è</strong><br>
    Sensa√ß√£o 25¬∞ ¬∑ Chuva 10%
  </div>

  <div class="widget clock">
    <div class="clock-time" id="time"></div>
    <div class="clock-date" id="date"></div>
  </div>

  <div class="widget forecast">
    <span>‚òÄÔ∏è 24¬∞</span>
    <span>üåßÔ∏è 22¬∞</span>
    <span>‚õÖ 23¬∞</span>
  </div>

  <div class="widget">
    Widget futuro do Jarvis
  </div>

</div>

<script>
// CLOCK
function updateClock() {
  const now = new Date();
  time.textContent = now.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});
  date.textContent = now.toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long"});
}
updateClock();
setInterval(updateClock,1000);

// EDIT MODE VIA DOUBLE TAP / CLICK
let editMode = false;
const grid = document.getElementById("grid");

document.querySelectorAll(".widget").forEach(w => {
  w.addEventListener("dblclick", () => toggleEdit());
  w.addEventListener("touchend", e => {
    if (e.detail === 2) toggleEdit();
  });
});

document.body.addEventListener("click", e => {
  if (editMode && !e.target.closest(".widget")) toggleEdit(false);
});

function toggleEdit(force) {
  editMode = force !== undefined ? force : !editMode;
  document.body.classList.toggle("edit-mode", editMode);
}

// DRAG
let dragged;
document.querySelectorAll(".widget").forEach(w => {
  w.draggable = true;

  w.addEventListener("dragstart", () => {
    if (!editMode) return false;
    dragged = w;
  });

  w.addEventListener("dragover", e => {
    if (editMode) e.preventDefault();
  });

  w.addEventListener("drop", e => {
    if (!editMode) return;
    e.preventDefault();
    if (dragged && dragged !== w) {
      const nodes = [...grid.children];
      const a = nodes.indexOf(dragged);
      const b = nodes.indexOf(w);
      grid.insertBefore(dragged, a < b ? w.nextSibling : w);
    }
  });
});

// THEME SLIDER (FLUIDO)
const thumb = document.getElementById("thumb");
thumb.addEventListener("mousedown", e => {
  const startX = e.clientX;
  const startLeft = thumb.offsetLeft;

  function move(ev) {
    let delta = ev.clientX - startX;
    let pos = Math.min(110, Math.max(4, startLeft + delta));
    thumb.style.left = pos + "px";
  }

  function up() {
    document.removeEventListener("mousemove", move);
    document.removeEventListener("mouseup", up);
  }

  document.addEventListener("mousemove", move);
  document.addEventListener("mouseup", up);
});
</script>

</body>
</html>
