<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Terminal</title>

<style>
:root{
  --grid: 96px;
  --gap: 12px;

  --glass: rgba(255,255,255,0.55);
  --border: rgba(255,255,255,0.35);
  --blur: blur(22px);
  --shadow: 0 20px 40px rgba(0,0,0,0.12);
}

*{
  box-sizing:border-box;
  font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",sans-serif;
}

body{
  margin:0;
  min-height:100vh;
  background:linear-gradient(135deg,#e6f1ff,#cfe4ff);
  padding:24px;
}

/* ===== GRID VISUAL FULLSCREEN ===== */
body.edit-mode::before{
  content:"";
  position:fixed;
  inset:0;
  background-image:
    linear-gradient(to right, rgba(0,0,0,.08) 1px, transparent 1px),
    linear-gradient(to bottom, rgba(0,0,0,.08) 1px, transparent 1px);
  background-size:var(--grid) var(--grid);
  pointer-events:none;
  z-index:0;
}

/* ===== APP ===== */
.app{
  position:relative;
  min-height:100vh;
}

/* ===== WIDGET BASE ===== */
.widget{
  position:absolute;
  background:var(--glass);
  backdrop-filter:var(--blur);
  border:1px solid var(--border);
  border-radius:26px;
  box-shadow:var(--shadow);
  padding:20px;
  user-select:none;

  /* encaixe elegante no grid */
  width:calc(var(--grid) * var(--w) - var(--gap));
  height:calc(var(--grid) * var(--h) - var(--gap));
}

.edit-mode .widget{
  cursor:grab;
  animation:wiggle .35s ease-in-out infinite alternate;
}

@keyframes wiggle{
  from{transform:rotate(-0.4deg)}
  to{transform:rotate(0.4deg)}
}

/* ===== CLOCK ===== */
.clock-time{font-size:56px;text-align:center}
.clock-date{opacity:.6;text-align:center}

/* ===== SLIDER (APROVADO) ===== */
.theme-slider{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:8px;
}

.theme-slider .track{
  position:absolute;
  inset:0;
  border-radius:26px;
  background:rgba(255,255,255,.35);
}

.slider-thumb{
  position:absolute;
  top:6px;
  left:7px;
  width:28px;
  height:28px;
  border-radius:50%;
  background:white;
  box-shadow:var(--shadow);
  transition:left .25s ease;
}

.theme-slider span{
  font-size:14px;
  z-index:1;
  opacity:.7;
}
</style>
</head>

<body>

<div class="app" id="app">

  <!-- THEME SLIDER WIDGET -->
  <div class="widget theme-slider"
       style="--w:3;--h:1;left:40px;top:40px"
       id="sliderWidget">

    <div class="track"></div>
    <div class="slider-thumb" id="thumb"></div>
    <span>â˜€ï¸</span>
    <span>AUTO</span>
    <span>ğŸŒ™</span>
  </div>

  <!-- WEATHER -->
  <div class="widget"
       style="--w:3;--h:2;left:40px;top:160px">
    23Â°C â˜€ï¸<br>SensaÃ§Ã£o 25Â°
  </div>

  <!-- CLOCK -->
  <div class="widget"
       style="--w:4;--h:2;left:360px;top:160px">
    <div class="clock-time" id="time"></div>
    <div class="clock-date" id="date"></div>
  </div>

  <!-- FORECAST -->
  <div class="widget"
       style="--w:3;--h:1;left:40px;top:380px">
    â˜€ï¸ 24Â° Â· ğŸŒ§ï¸ 22Â° Â· â›… 23Â°
  </div>

</div>

<script>
// CLOCK
function updateClock(){
  const n=new Date();
  time.textContent=n.toLocaleTimeString("pt-BR",{hour:"2-digit",minute:"2-digit"});
  date.textContent=n.toLocaleDateString("pt-BR",{weekday:"long",day:"numeric",month:"long"});
}
updateClock();
setInterval(updateClock,1000);

/* ===== EDIT MODE ===== */
const app=document.getElementById("app");
let edit=false,hold;

function enterEdit(){
  edit=true;
  document.body.classList.add("edit-mode");
}
function exitEdit(){
  edit=false;
  document.body.classList.remove("edit-mode");
}

document.addEventListener("dblclick",e=>{
  if(e.target.closest(".widget")) enterEdit();
});

document.addEventListener("mousedown",e=>{
  if(!e.target.closest(".widget")) exitEdit();
});

document.addEventListener("mousedown",e=>{
  if(!e.target.closest(".widget")) return;
  hold=setTimeout(enterEdit,500);
});
document.addEventListener("mouseup",()=>clearTimeout(hold));

/* ===== DRAG + SNAP GRID ===== */
const grid=parseInt(getComputedStyle(document.documentElement)
  .getPropertyValue("--grid"));

let active,ox,oy;

document.addEventListener("mousedown",e=>{
  if(!edit) return;
  const w=e.target.closest(".widget");
  if(!w) return;

  active=w;
  const r=w.getBoundingClientRect();
  ox=e.clientX-r.left;
  oy=e.clientY-r.top;

  document.addEventListener("mousemove",move);
  document.addEventListener("mouseup",drop);
});

function move(e){
  if(!active) return;
  active.style.left=e.clientX-ox+"px";
  active.style.top=e.clientY-oy+"px";
}

function drop(){
  if(!active) return;
  const x=Math.round(active.offsetLeft/grid)*grid;
  const y=Math.round(active.offsetTop/grid)*grid;
  active.style.left=x+"px";
  active.style.top=y+"px";
  active=null;
  document.removeEventListener("mousemove",move);
  document.removeEventListener("mouseup",drop);
}

/* ===== THEME SLIDER ===== */
const thumb=document.getElementById("thumb");
const positions=[7,70,133];
let current=1;

function snapTheme(i){
  current=i;
  thumb.style.left=positions[i]+"px";
}
thumb.addEventListener("click",()=>{
  snapTheme((current+1)%3);
});
snapTheme(1);
</script>

</body>
</html>
